bottomparticipants 
ClientA->Server: Establish connection
Server->ClientA: Connection established

==Starting the game==
ClientA->Server: START
note over Server: Server checks if Client A has an active game session
note over Server: Server gives client A id 1234
Server->ClientA: WAITING

==Match making broadcast==
Server->Server: FIND_OPPONENT <client_A_id>

note over Server, ClientB: Broadcast message sent to all clients

ClientB->Server: JOIN <client_A_id>
note over Server: Server checks if Client B has an active game session
note over Server: Server gives client B id 5678
parallel 
Server->ClientA: Connected 1234 5678
Server->ClientB: Connected 1234 5678
parallel off
==Game setup==
note over Server: sets up 1D grids: let's assume [X, X, 0, 0, 0, 0, X, X, X, 0] associated with client B and [X, X, X, 0, X, X, 0, 0, 0, 0] associated with client A
parallel
Server->ClientA: Game_ready
Server->ClientB: Game_ready
parallel off

==Position guess==
Server->ClientA: YOUR_TURN
ClientA->Server: ATTACK 0
Server->ClientA: HIT
Server->ClientB: YOUR_TURN
ClientB->Server: ATTACK 3
Server->ClientB: MISS
Server->ClientA: YOUR_TURN
ClientA->Server: ATTACK 1
Server->ClientA: DESTROYED

note over Server: Client B proceeds to attack 6, 7, then 8 and Client A proceeds to attack 7 then 8

Server->ClientA: YOUR_TURN
ClientA->Server: ATTACK 6
Server->ClientA: DESTROYED
note over Server: Every warship of the grid associated with client B is destroyed, so client A wins.
==Victory and defeat==
parallel
Server->ClientA: VICTORY
Server->ClientB: DEFEAT
parallel off
==Rematch offer==
parallel
Server->ClientA: REMATCH_OFFER
Server->ClientB: REMATCH_OFFER
parallel off
ClientB->Server: REMATCH_ACCEPT
ClientA->Server: REMATCH_ACCEPT
parallel
Server->ClientA: REMATCH_START
Server->ClientB: REMATCH_START
parallel off
==Game setup==
note over Server: sets up 1D grids: let's assume [0, X, X, X, 0, X, X, 0, 0, 0] associated with client B and [0, X, X, X, 0, X, X, 0, 0, 0] associated with client A
parallel
Server->ClientA: Game_ready
Server->ClientB: Game_ready
parallel off
==Position guess==
Server->ClientA: YOUR_TURN
note over Server: Client B proceeds to win the game
parallel
Server->ClientB: VICTORY
Server->ClientA: DEFEAT
parallel off
==Rematch offer==
parallel
Server->ClientA: REMATCH_OFFER
Server->ClientB: REMATCH_OFFER
parallel off
ClientB->Server: REMATCH_DECLINE
parallel
Server->ClientA: REMATCH_DECLINED
Server->ClientB: REMATCH_DECLINED
parallel off
parallel
Server->ClientA: DISCONNECT
Server->ClientB: DISCONNECT
parallel off
==Connection closed==


